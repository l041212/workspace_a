<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta charset="UTF-8">
    <title>知识-CRM知识库管理系统</title>
    <meta name="description" content="全文检索--知识库管理系统">
    <meta name="viewport" content="width=device-width, initial-scgale=1.0, maximum-scale=1.0" >
    <link rel="icon" th:href="@{img/icon/bus3.ico}"/>
    <link rel="stylesheet" type="text/css" th:href="@{css/bootstrap.min.css}" >
    <link rel="stylesheet" type="text/css" th:href="@{css/bootstrap-theme.css}" >
    <link rel="stylesheet" type="text/css" th:href="@{css/font-awesome.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{css/knowledge/web-base.css}">
    <link rel="stylesheet" type="text/css" th:href="@{css/knowledge/web-black.css}">
    <link rel="stylesheet" type="text/css" th:href="@{css/knowledge/default.css}">
</head>
<body>
<!--head-->
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation" style="margin: 0px;">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" style="color: #ffffff; font-weight: bold; padding: 5px;" >
                <img th:src="@{img/knowledge/book1.png}" alt="知识库" height="40" align="middle">
            </a>
        </div>
        <div class="navbar-collapse in" id="bs-example-navbar-collapse-1" style="height: auto;">
            <ul class="nav navbar-nav">
                <li>
                    <a href="/knowMain">
                        <span class="glyphicon glyphicon-home"></span> 首页
                    </a>
                </li>
                <li>
                    <a href="/knowType/13?order=createDate&sort=desc&showType=list">
                        <span class="glyphicon glyphicon-book"></span> 知识
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="glyphicon glyphicon-bookmark"></span> 我的空间
                    </a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right hidden-xs" style="margin-right: 10px;" shiro:hasPermission="know:add">
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        <span class="glyphicon glyphicon-plus"></span>知识/创建
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a target="_blank" href="/addKnow">
                                <span class="glyphicon glyphicon-book"></span>&nbsp;创建知识
                            </a>
                        </li>
                        <!--<li>
                            <a target="_blank" >
                                <span class="glyphicon glyphicon-question-sign"></span>&nbsp;创建提问
                            </a>
                        </li>
                        <li>
                            <a target="_blank">
                                <span class="glyphicon glyphicon-cloud"></span>&nbsp;下载网页知识
                            </a>
                        </li>
                        <li>
                            <a target="_blank">
                                <span class="glyphicon glyphicon-folder-close"></span>&nbsp;上传资源知识
                            </a>
                        </li>-->
                        <li>
                            <a target="_blank">
                                <span class="glyphicon glyphicon-file"></span>&nbsp;word创建知识
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                        <span class="glyphicon glyphicon-user"></span>&nbsp;&nbsp;<shiro:principal property="name"/>
                    </a>
                </li>
            </ul>
            <form  method="post" action="/searchAllKnow" id="lucenesearchFormId" style="margin-top: 10px;" class="navbar-form navbar-right hidden-xs hidden-sm " role="search">
                <div class="form-group">
                    <div class="input-group" style="max-width: 200px;">
                        <input type="text" name="word" id="wordId" value="" class="form-control input-sm" placeholder="检索词...">
                        <span class="input-group-btn">
                            <button type="submit" class="btn btn-default btn-sm">
                                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>检索
                            </button>
				        </span>
                    </div>
                </div>
                <!--<button type="submit" id="miniSearchPlusButtonId" class="btn btn-danger btn-sm">高级检索</button>-->
            </form>
        </div>
    </div>
</div>
<!--head-->
<div class="super_content">
    <div id="showHomeMessageId" class="new-userMessage">
    </div>
</div>
<div class="containerbox" style="min-height: 500px;">
    <div class="container">
        <div style="margin-top: 8px;"></div>
        <div class="row column_box">
            <div class="col-lg-2"></div>
            <div class="col-lg-8">
                <div class="row">
                    <div class="col-sm-12 column_box">
                        <div class="row">
                            <div class="col-sm-12 ">
                                <form action="/searchAllKnow" id="websearchpubdoId" method="post">
                                    <div class="input-group">
                                        <span class="input-group-addon" id="limitTypeTag">全部</span>
                                        <input type="text" class="form-control" name="word" value="" id="searchInput" placeholder="请输入关键字...">
                                        <!--返回的结果类型-->
                                        <input type="hidden" name="resultType" id="resultTypeInputId" value="0">
                                        <div class="input-group-btn">
                                            <button class="btn btn-info" type="submit">
                                                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                                                &nbsp;
                                                <span id="resultTypeNameId">检索</span>
                                            </button>
                                           <!-- <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                                                <span class="caret"></span>
                                            </button>-->
                                           <!-- <ul class="dropdown-menu dropdown-menu-right">
                                                <li>
                                                    <a href="javascript:chooseResultType(0);">
                                                        查找&nbsp;
                                                        <b>全部</b>
                                                    </a>
                                                </li>
                                                <li role="separator" class="divider"></li>
                                                <li>
                                                    <a href="javascript:chooseResultType(1);">
                                                        查找&nbsp;
                                                        <b>知识</b>
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="javascript:chooseResultType(2);">
                                                        查找&nbsp;
                                                        <b>问答</b>
                                                    </a>
                                                </li>
                                            </ul>
                                            <div class="btn-group" role="group" aria-label="...">
                                                <a id="searchPlusButtonId" class="btn btn-danger" style="margin-left: 16px;">高级检索</a>
                                            </div>-->
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="row"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2"></div>
        </div>
        <div class="row">
            <div class="col-sm-9">
                <div class="panel panel-default" style="margin-top: 60px;">
                    <div class="panel-body">
                        <div class="row ">
                            <div class="col-sm-12">
                                <div style="margin-bottom: 16px;">
                                    <span class="glyphicon glyphicon-fire  column_title">&nbsp;检索到[[${knowEsList.size()}]]条结果,用时[[${times}]]毫秒 </span>

                                   <!--<div class="btn-group btn-group-sm pull-right" role="group" aria-label="..." style="margin-top: -6px;">
                                       <button type="button" onclick="turnSearchType('list')"   title="列表模式" class="btn btn-default">
                                           列表<i style="margin-left: 0.5em;" class="glyphicon glyphicon-th-list"></i>
                                       </button>
                                       <button onclick="turnSearchType('img')" type="button"   title="图片模式" class="btn btn-default">
                                           图片<i style="margin-left: 0.5em;" class="glyphicon glyphicon-th-large"></i>
                                       </button>
                                    </div>-->

                                </div>
                            </div>
                        </div>
                        <hr style="margin-left: -16px; margin-right: -16px;">
                        <div class="row" th:if="${knowEsList!=null}">
                            <div class="col-sm-12"  th:each="know:${knowEsList}">
                                <div class="col-sm-12 doc_node">
                                    <div class="media">
                                        <div class="media-body">
                                            <div style="margin-left: 4px;" class="pull-left">
                                                <div class="doc_node_title_box">
                                                    <a class="doc_node_title_min" target="_blank" th:href="@{'/know/'+${know.id}}">
                                                        <span class="glyphicon glyphicon-book"></span>
                                                        <font  th:utext="${know.knowTitle}" ></font>
                                                    </a>
                                                </div>
                                                <div class="doc_node_content_box">
                                                    <p class="doc_node_content" th:utext="${know.content}"></p>
                                                </div>
                                                <div class="side_unit_info side_unit_info_left_box">

                                                    <a href="#" th:title="${know.creater}">
                                                        <span title="" th:text="${know.creater}" class="side_unit_info">zz</span>
                                                    </a>
                                                    <a href="#" th:utext="${know.knowType}"></a>
                                                    [[${know.createDate}]]
                                                </div>
                                                <br>
                                                <div class="row" th:if="${know.knowTag!=null}">
                                                    <div class="col-md-12 text-left">
                                                        <span class="label label-default tagsearch" style="cursor: pointer;" th:if="${tag!=''}" th:each="tag:${know.knowTag.split('/')}" th:title="${tag}" th:text="${tag}"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="hr_split">
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-3  hidden-xs">
                <div class="row column_box">
                    <div class="col-sm-12">
                        <span class="glyphicon glyphicon-fire  column_title">&nbsp;知识分类</span>
                    </div>
                </div>
                <div style="margin-top: 8px;"></div>
                <div class="panel panel-default">
                    <ul class="doctypeUl"  >
                        <li th:each="konwType:${types}" th:if="${konwType.parentId==13}">
                            <h5 class="showLableType3">
                                <a class="linkTitle linklevel1" th:id="${konwType.id}" th:attr="knowTags=${konwType.title}" th:text="${konwType.text}" onclick="clickType(this)"></a>
                                <span class="farm_tree_num" th:if="${konwType.typeCount!=0}" th:text="${konwType.typeCount}"></span>
                                <a th:if="${konwType.hasMenu}" class="glyphicon farm_tree_flag  farm_tree_s glyphicon-chevron-up"  onclick="clickTreeFlag(this)">
                                </a>
                            </h5>
                            <ul  th:if="${konwType.hasMenu}" >
                                <li th:each="konwType1:${konwType.getSonTypes()}">
                                    <h5 class="showLableType3">
                                        <a class="linkTitle linklevel2" th:id="${konwType1.id}" th:text="${konwType1.text}" onclick="clickType(this)">
                                        </a>
                                        <span class="farm_tree_num" th:if="${konwType1.typeCount!=0}" th:text="${konwType1.typeCount}"></span>
                                        <a th:if="${konwType1.hasMenu}" class="glyphicon farm_tree_flag  farm_tree_s glyphicon-chevron-up"  onclick="clickTreeFlag(this)">
                                        </a>
                                    </h5>
                                    <ul  th:if="${konwType1.hasMenu}">
                                        <li th:each="konwType2:${konwType1.getSonTypes()}">
                                            <a class="linkTitle linklevel2" th:id="${konwType2.id}" th:text="${konwType2.text}" onclick="clickType(this)">
                                            </a>
                                            <span class="farm_tree_num" th:if="${konwType2.typeCount!=0}" th:text="${konwType2.typeCount}"></span>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="foot">
    知识管理系统-V1.0.0
</div>
<script th:src="@{js/jquery-2.1.4.min.js}"></script>
<script th:src="@{js/bootstrap.min.js}" ></script>
<script th:inline="javascript">

    $(function () {
        $("hih").css("color","red");
        if($(".doc_node_content").text().length>200){
            $(".doc_node_content").text( $(".doc_node_content").text().substring(0,200)+"...");
        }
    })

function chooseResultType(i) {
    $("#resultTypeInputId").val(i);
    if(i==0){
        $("#limitTypeTag").text("全部");
        $("#resultTypeNameId").text("检索");
    }else if(i==1){
        $("#limitTypeTag").text("知识");
        $("#resultTypeNameId").text("知识");
    }else{
        $("#limitTypeTag").text("问答");
        $("#resultTypeNameId").text("问答");
    }
}

function clickTreeFlag(obj) {
    if($(obj).hasClass("glyphicon-chevron-down")){
        $(obj).removeClass("glyphicon-chevron-down");
        $(obj).addClass("glyphicon-chevron-up");
        $(obj).parent().next().css("display","block");
    }else  if($(obj).hasClass("glyphicon-chevron-up")){
        $(obj).removeClass("glyphicon-chevron-up");
        $(obj).addClass("glyphicon-chevron-down");
        $(obj).parent().next().css("display","none");
    }
}
</script>
</body>
</html>